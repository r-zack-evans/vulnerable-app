import{_,B as C,A as x,a as L,c as d,w as a,u as B,r as i,o as m,b as t,d as h,e as k,f as n,g as c,v as w,h as v}from"./main-BpFvOhNr.js";import{F as A}from"./FormGroup-UUtRVAqT.js";const S={name:"LoginView",components:{BaseLayout:L,AlertMessage:x,FormGroup:A,Button:C},data(){return{username:"",password:"",error:null,message:null,loading:!1,defaultCredentials:{admin:{username:"admin",password:"admin123"},user:{username:"user",password:"password123"}}}},created(){const s=new URLSearchParams(window.location.search);if(s.has("message")&&(this.message=s.get("message")),s.has("demo")){const e=s.get("demo");this.defaultCredentials[e]&&(this.username=this.defaultCredentials[e].username,this.password=this.defaultCredentials[e].password)}},setup(){return{authStore:B()}},methods:{async login(){try{this.error=null,this.loading=!0,await this.authStore.login({username:this.username,password:this.password})?this.authStore.isAdmin?this.$router.push("/admin"):this.$router.push("/"):this.error=this.authStore.error}catch(s){console.error("Login error:",s),this.error="An unexpected error occurred during login."}finally{this.loading=!1}},fillCredentials(s){this.defaultCredentials[s]&&(this.username=this.defaultCredentials[s].username,this.password=this.defaultCredentials[s].password)}}},V={class:"auth-form"},b={class:"form-group"},F={class:"demo-credentials"},M={class:"demo-buttons"},N={class:"auth-links"};function U(s,e,P,T,r,l){const p=i("AlertMessage"),g=i("FormGroup"),u=i("Button"),f=i("router-link"),y=i("BaseLayout");return m(),d(y,null,{default:a(()=>[t("section",V,[e[9]||(e[9]=t("h1",null,"Login",-1)),r.message?(m(),d(p,{key:0,type:"info",message:r.message},null,8,["message"])):h("",!0),r.error?(m(),d(p,{key:1,type:"danger",message:r.error},null,8,["message"])):h("",!0),t("form",{onSubmit:e[2]||(e[2]=k((...o)=>l.login&&l.login(...o),["prevent"]))},[n(g,{label:"Username",id:"username"},{default:a(()=>[c(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),required:"",autocomplete:"username"},null,512),[[w,r.username]])]),_:1}),n(g,{label:"Password",id:"password"},{default:a(()=>[c(t("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=o=>r.password=o),required:"",autocomplete:"current-password"},null,512),[[w,r.password]])]),_:1}),t("div",b,[n(u,{type:"submit",variant:"primary",loading:r.loading,text:"Login"},null,8,["loading"])])],32),t("div",F,[e[5]||(e[5]=t("h4",null,"Demo Credentials",-1)),t("div",M,[n(u,{onClick:e[3]||(e[3]=o=>l.fillCredentials("admin")),variant:"outline",text:"Admin Login"}),n(u,{onClick:e[4]||(e[4]=o=>l.fillCredentials("user")),variant:"outline",text:"User Login"})]),e[6]||(e[6]=t("p",{class:"demo-note"},"Note: For educational purposes only. These credentials allow access to a vulnerable system.",-1))]),t("div",N,[n(f,{to:"/auth/forgot-password"},{default:a(()=>e[7]||(e[7]=[v("Forgot Password?")])),_:1}),n(f,{to:"/register"},{default:a(()=>e[8]||(e[8]=[v("Don't have an account? Register")])),_:1})])])]),_:1})}const q=_(S,[["render",U],["__scopeId","data-v-66d8642f"]]);export{q as default};
